<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Crypto Signals PRO</title>

<script src="https://telegram.org/js/telegram-web-app.js"></script>

<style>

body {
  margin:0;
  font-family: Inter, Arial;
  background: radial-gradient(circle at top,#0f172a,#020617);
  color:white;
}

/* HEADER */

.header {
  padding:25px;
  font-size:24px;
  font-weight:600;
  text-align:center;
  background: linear-gradient(90deg,#22c55e,#4ade80);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}

/* CARD */

.card {
  background: rgba(30,41,59,0.6);
  backdrop-filter: blur(15px);
  border-radius:20px;
  margin:20px;
  padding:20px;
  box-shadow:0 0 40px rgba(34,197,94,0.15);
}

/* SELECT */

select {
  width:100%;
  padding:14px;
  border-radius:12px;
  border:none;
  margin-top:10px;
  background:#020617;
  color:white;
}

/* BUTTON */

button {
  width:100%;
  padding:16px;
  border:none;
  border-radius:14px;
  margin-top:15px;
  font-size:16px;
  font-weight:600;
  cursor:pointer;
  transition:0.2s;
}

.btn-primary {
  background: linear-gradient(45deg,#22c55e,#4ade80);
  box-shadow:0 0 20px rgba(34,197,94,0.5);
}

.btn-secondary {
  background:#1e293b;
}

button:active {
  transform:scale(0.97);
}

/* RESULT */

.result {
  margin-top:15px;
  padding:15px;
  border-radius:12px;
  background:#020617;
}

</style>
</head>

<body>

<div class="header">üöÄ Crypto Signals PRO</div>

<div class="card">

<label>–í–∞–ª—é—Ç–Ω–∞—è –ø–∞—Ä–∞</label>
<select id="pair">
  <option>BTC/USDT</option>
  <option>ETH/USDT</option>
  <option>SOL/USDT</option>
</select>

<label>–¢–∞–π–º—Ñ—Ä–µ–π–º</label>
<select id="timeframe">
  <option>1m</option>
  <option>5m</option>
  <option>15m</option>
  <option>1h</option>
</select>

<button class="btn-secondary" onclick="register()">üë§ –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</button>
<button class="btn-primary" onclick="getSignal()">üìà –ü–æ–ª—É—á–∏—Ç—å —Å–∏–≥–Ω–∞–ª</button>

<div id="result" class="result"></div>

</div>

<script>

const tg = window.Telegram.WebApp;
const userId = tg.initDataUnsafe?.user?.id || 0;

const SIGNAL_LINK = "https://u3.shortink.io/register?utm_campaign=831166&utm_source=affiliate&utm_medium=sr&a=oZKTW7CtCeLnCu&ac=sipi";

function register() {
  fetch('/register', {
    method:'POST',
    headers:{'Content-Type':'application/json'},
    body:JSON.stringify({ telegramId:userId })
  })
  .then(res=>res.json())
  .then(()=>{
    document.getElementById('result').innerHTML="‚úÖ –í—ã –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω—ã";
  });
}

function getSignal() {

  const pair=document.getElementById('pair').value;
  const timeframe=document.getElementById('timeframe').value;

  fetch('/signal',{
    method:'POST',
    headers:{'Content-Type':'application/json'},
    body:JSON.stringify({ telegramId:userId,pair,timeframe })
  })
  .then(res=>res.json())
  .then(data=>{

    if(!data.access){
      document.getElementById('result').innerHTML="‚ùå –ù—É–∂–Ω–æ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è";
      return;
    }

    tg.openLink(SIGNAL_LINK);

    document.getElementById('result').innerHTML="üöÄ –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–∏–≥–Ω–∞–ª—É...";
  });

}

</script>

</body>
</html>
